{% extends "layout.html" %}

{% block pageTitle %}
  Add documents to support your application
{% endblock %}

{% block beforeContent %}
  {{ govukPhaseBanner({
    tag: {
      text: "alpha"
    },
    html: 'This is a new service â€“ your <a class="govuk-link" href="#">feedback</a> will help us to improve it.'
  }) }}
  {{ govukBackLink({
    text: "Back",
    href: 'evidence'
  }) }}
{% endblock %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <form action="handle-file-upload" method="post" id="file-upload-form">
        <h1 class="govuk-heading-xl">
          Add documents to support your application
        </h1>
        {% set fileTypeErr %}
        {% if fileTypeErr === 'true' %}
          We do not accept the file type .exe
        {% endif %}
        {% endset %}
        <p class="govuk-body"></p>

        {% set uploadText %}
        {% if evidence.length > 0 %}
          Add another document
        {% else %}
          Add a document
        {% endif %}
        {% endset -%}
        <div class='file-upload'>
          {{ govukFileUpload({
              id: "file-upload",
              name: "fileUpload",
              label: {
                text: uploadText
              },
              value: ""
            }) }}
        </div>
        <div class="upload-status-heading">
          <h4 class="govuk-heading-s">Uploading document</h4>
        </div>
        <div class="upload-status">
          <h2 class="govuk-heading-m upload-status__title">document.docx</h4>
          <p class="govuk-body upload-status__status">
            <span class='upload-status__value'>0</span>% uploaded</p>
          <a href='#' class="govuk-link upload-status__link">Cancel</a>
          <div class="progress-bar">
            <div class="indicator"></div>
          </div>
        </div>

        {% set removeLink %}
        <a href="remove-document" class="govuk-link">Remove</a>
        {% endset -%}
        {% if reasonObject.documents.length > 0 %}
          <dl class="govuk-upload-list">
            {% for document in reasonObject.documents | reverse %}
              <div class="ch-upload-list__row uploaded-file-{{loop.index0}}">
                <dt class="ch-upload-list__key govuk-visually-hidden">
                  Uploaded file
                </dt>
                <dd class="ch-upload-list__value">
                  <a href="#" class="govuk-link">{{ document }}</a>
                </dd>
                <dd class="ch-upload-list__actions">
                  <a class="govuk-link" href="remove-document">
                    Remove
                  </a>
                </dd>
              </div>
            {% endfor %}
          </dl>
        {% endif %}
      </form>
      <form method="POST" action="">
        {{ govukButton({
              text: "Continue"
            }) }}
        <p>
          <a href="/add-extension-reason" class="govuk-link">Continue without adding documents</a>
        </p>
        <p>
          <a href="/sign-out" class="govuk-link">Save and sign out</a>
        </p>
      </form>
    </div>
  </div>

{% endblock %}